<style>html{font:18px system-ui}body{background:#111;color:#fff;margin:auto;max-width:1000;width:100%;padding:4rem 17}input{width:100%;border:0;outline:0;background:#222;color:#fff;padding:.5rem;font-size:1rem}input,results{display:block}img{max-width:100%;}note-card{display:block;padding:.5rem 0;border-top:1px solid #333;margin-bottom:1rem}note-card button{visibility:hidden}note-card:hover button{visibility:unset}note-card main{display:flex;flex-direction:row;color:#999}note-card p{width:100%}note-card h3:hover{text-decoration:underline;color:#ffba1f;cursor:pointer}::-webkit-scrollbar{display:none}button{background:#222;border:none;font-size:1rem;color:#ffba1f;padding:1rem}button:hover{cursor:pointer}note-editor h1{margin-bottom:3.4rem;border-bottom:1px solid #333;padding-bottom:.3rem}note-editor .content{margin-bottom:4rem}[contenteditable]{outline:0}</style><script>
{function html(e,t){let n=document.createElement("div");return n.innerHTML=e,1==n.children.length?n.children[0]:n.children}function remember(){localStorage.setItem("data",JSON.stringify(e.data))}const e={data:JSON.parse(localStorage.getItem("data"))||{},get(){return Object.values(this.data)},createNew(){let e=Math.floor(1e6*Math.random());remember(this.data[e]={id:e,name:"Untitled",content:""})},delete(e){delete this.data[e],remember()},edit(e,t){remember(this.data[e]=t)}};function App(){let e=html("<div><h1>üôãüèª‚Äç‚ôÄÔ∏è notes</h1></div>");return e.append(NoteList()),e}function NoteList(){let t,[n,o]=html("<input placeholder=search><results>"),r=html("<note-card><button style=padding:1rem>Add note</button></note-card>");function a(){o.innerHTML="",t=e.get("notes"),(n.value.trim()?t.filter(e=>e.name.toLowerCase().match(RegExp(n.value.toLowerCase().trim()))):t).forEach(e=>o.append(NoteCard(e,arguments.callee)))}n.onkeyup=a,a(),r.onclick=function(){e.createNew(),a()};let d=html("<div>");return d.append(n),d.append(o),d.append(r),d}function NoteCard(t,n){let o=html(`<div>${t.content}</div>`).innerText.slice(0,80)||"No text",r=html(`<note-card><h3>${t.name}</h3><main><p>${o}</p><button>Delete</button></main></note-card>`);return r.querySelector("button").onclick=function(){e.delete(t.id),n()},r.querySelector("h3").onclick=function(){document.body.innerHTML="",document.body.append(NoteEditor(t))},r}function NoteEditor(t){let n=html(`\n      <note-editor>\n        <h1 contenteditable>${t.name}</h1><div contenteditable autofocus class=content>${t.content}</div><button>Back</button></note-editor>`),o=n.querySelector("h1"),r=n.querySelector("div");function a({target:n}){e.edit(t.id,{id:t.id,name:o.innerText,content:r.innerHTML.trim()})}return o.onblur=a,r.onblur=a,n.querySelector("button").onclick=function(){onload()},n}onload=function(){document.body.innerHTML="",document.body.append(App())}}</script>
